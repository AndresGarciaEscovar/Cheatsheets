%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  "conda" Cheatsheet
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{\quoted{conda}\,Cheatsheet}

%///////////////////////////////////////////////////////////////////////////////////////////////////
% Create "conda" Environment
%///////////////////////////////////////////////////////////////////////////////////////////////////

\subsection{Create Environment}

\begin{itemize}
    %
    \item Create an empty conda environment:
    \begin{mintedbox}{bash}
conda create --name <env_name>
    \end{mintedbox}
    %
    \item Create a conda environment with packages:
    \begin{mintedbox}{bash}
conda create --name <env_name> <package_name_0>...<package_name_N>
    \end{mintedbox}
    %
    \item Create a conda environment from a yaml file:
    \begin{mintedbox}{bash}
conda env create --file <path_to_yaml_file>
    \end{mintedbox}
    Sample yaml file:
    \begin{mintedbox}{yaml}
name: myenv
channels:
    - conda-forge
    - defaults
dependencies:
    - python=3.7
    - numpy
    - matplotlib
    - pip
    - pip:
        - tensorflow==2.0.0
    \end{mintedbox}
    %
    \item Create at a specific location:
    \begin{mintedbox}{bash}
conda create --prefix <path_to_env>
    \end{mintedbox}
    The previous options still hold.
    %
\end{itemize}


%///////////////////////////////////////////////////////////////////////////////////////////////////
% Activate "conda" Environment
%///////////////////////////////////////////////////////////////////////////////////////////////////

\subsection{Activate Environment}
\label{conda:activateEnv}

\begin{itemize}
    %
    \item Activate an environment in the main installation directory:
    \begin{mintedbox}{bash}
conda activate <env_name>
    \end{mintedbox}
    %
    \item Activate an environment in a specific location:
    \begin{mintedbox}{bash}
conda activate <path_to_env>
    \end{mintedbox}
    %
    \item To deactivate an environment:
    \begin{mintedbox}{bash}
conda deactivate
    \end{mintedbox}
    %
    \newpage
    \item Activate conda environment in a Python script:
    \begin{mintedbox}{python}
import subprocess

script = (
    ". /home/hp/miniconda3/etc/profile.d/conda.sh && conda activate "
    "testenv && conda env list"
)

subprocess.run(script.split(" "), shell=True)
    \end{mintedbox}
    Things to remember:
    \begin{itemize}
        \item The \nminted{python}{shell=True} option is important; with
        \nminted{python}{shell=False}, the code will \textbf{not} run.
    \end{itemize}
    %
\end{itemize}

%///////////////////////////////////////////////////////////////////////////////////////////////////
% Clone "conda" Environment
%///////////////////////////////////////////////////////////////////////////////////////////////////

\subsection{Clone Environment}

\begin{itemize}
    %
    \item Clone an environment:
    \begin{mintedbox}{bash}
conda create --name <env_name> --clone <env_to_clone>
    \end{mintedbox}
    %
\end{itemize}

%///////////////////////////////////////////////////////////////////////////////////////////////////
% Remove "conda" Environment
%///////////////////////////////////////////////////////////////////////////////////////////////////

\subsection{Remove Environment}

\begin{itemize}
    %
    \item Remove an environment:
    \begin{mintedbox}{bash}
conda remove --name <env_name> --all
    \end{mintedbox}
    %
    \item Remove and environment in a specific location:
    \begin{mintedbox}{bash}
conda remove --prefix <path_to_env> --all
    \end{mintedbox}
    %
\end{itemize}

%///////////////////////////////////////////////////////////////////////////////////////////////////
% Add Packages to "conda" Environment
%///////////////////////////////////////////////////////////////////////////////////////////////////

\subsection{Add Packages}

Notice that different commands can be mixed and matched.
\begin{itemize}
    %
    \item Add packages to an environment:
    \begin{mintedbox}{bash}
conda install --name <env_name> <package_name_0>...<package_name_N>
    \end{mintedbox}
    %
    \item Add packages to an environment in a specific location:
    \begin{mintedbox}{bash}
conda install --prefix <path_to_env> <package_name_0>...<package_name_N>
    \end{mintedbox}
    %
    \item Add packages to an active environment:
    \begin{enumerate}
        \item Activate the environment (\hyperref[conda:activateEnv]{click here}).
        \item Add packages:
        \begin{mintedbox}{bash}
conda install <package_name_0>...<package_name_N>
        \end{mintedbox}
    \end{enumerate}
    %
    \item Add packages from a different channel in an active environment:
    \begin{mintedbox}{bash}
conda install --channel <channel_name> <package_name_0>...<package_name_N>
    \end{mintedbox}
    %
    \item Add packages with a specific version:
    \begin{mintedbox}{bash}
conda install <package_name>=<version>
    \end{mintedbox}
    %
    \item Add packages from a yaml file:
    \begin{mintedbox}{bash}
conda env update --file <path_to_yaml_file>
    \end{mintedbox}
        %
    \item Update the packages to the given ones:
    \begin{mintedbox}{bash}
conda env update --file <path_to_yaml_file> --prune
    \end{mintedbox}
    Sample yaml file to udpate:
    \begin{mintedbox}{yaml}
        channels:
            - conda-forge
            - defaults
        dependencies:
            - python=3.7
            - numpy
            - matplotlib
            - pip
            - pip:
                - tensorflow==2.0.0
            \end{mintedbox}
            %
\end{itemize}


%///////////////////////////////////////////////////////////////////////////////////////////////////
% Remove Packages from "conda" Environment
%///////////////////////////////////////////////////////////////////////////////////////////////////

\subsection{Remove Packages}

\begin{itemize}
    \item Remove packages from an environment:
    \begin{mintedbox}{bash}
conda remove --name <env_name> <package_name_0>...<package_name_N>
    \end{mintedbox}
    %
    \item Remove packages from an environment in a specific location:
    \begin{mintedbox}{bash}
conda remove --prefix <path_to_env> <package_name_0>...<package_name_N>
    \end{mintedbox}
    %
    \item Remove packages from an active environment:
    \begin{enumerate}
        \item Activate the environment (\hyperref[conda:activateEnv]{click here}).
        \item Remove packages:
        \begin{mintedbox}{bash}
conda remove <package_name_0>...<package_name_N>
        \end{mintedbox}
    \end{enumerate}
    %
\end{itemize}
